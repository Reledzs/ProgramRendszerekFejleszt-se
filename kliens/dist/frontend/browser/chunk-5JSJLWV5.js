import{a as ut,b as _t}from"./chunk-CNUON6OJ.js";import{a as Et}from"./chunk-VYZOO4Z5.js";import"./chunk-YQIIGZSV.js";import{a as ht,b as yt,c as bt,d as vt,e as Ct,f as Mt,g as St,h as Dt,i as kt,j as wt,k as xt,l as B}from"./chunk-GIISCLF3.js";import{b as gt}from"./chunk-XVS2ME6S.js";import{a as pt,c as ft}from"./chunk-BRJT4V7N.js";import{B as dt,H as ct,N as mt,t as st,w as lt}from"./chunk-DXXU7KGT.js";import{s as rt}from"./chunk-GUNOTPQD.js";import{$ as p,Bb as s,Cb as f,Db as tt,Ga as l,Ka as g,Lb as S,Nb as D,Ob as et,Ra as v,Sa as L,Ta as Q,Tb as it,V as A,Vb as y,W as O,Wa as d,Y as H,aa as P,ab as x,ba as R,bb as _,db as E,fa as U,fb as q,ga as z,h as w,ha as F,ia as N,ib as r,j as T,jb as n,kb as h,kc as nt,lb as c,mb as m,nc as ot,ob as K,oc as at,qa as Y,qb as C,rb as M,sb as W,tb as Z,ua as j,vb as G,wa as $,wb as J,x as I,xb as X,za as V}from"./chunk-UYNK6D4K.js";var Pt=["mat-sort-header",""],Rt=["*"];function Ut(e,i){e&1&&(r(0,"div",2),N(),r(1,"svg",3),h(2,"path",4),n()())}var Bt=new H("MAT_SORT_DEFAULT_OPTIONS"),b=(()=>{class e{_defaultOptions;_initializedStream=new T(1);sortables=new Map;_stateChanges=new w;active;start="asc";get direction(){return this._direction}set direction(t){this._direction=t}_direction="";disableClear;disabled=!1;sortChange=new Y;initialized=this._initializedStream;constructor(t){this._defaultOptions=t}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let o=t?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,a=zt(t.start||this.start,o),u=a.indexOf(this.direction)+1;return u>=a.length&&(u=0),a[u]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}static \u0275fac=function(o){return new(o||e)(g(Bt,8))};static \u0275dir=Q({type:e,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",y],disabled:[2,"matSortDisabled","disabled",y]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[U]})}return e})();function zt(e,i){let t=["asc","desc"];return e=="desc"&&t.reverse(),i||t.push(""),t}var k=(()=>{class e{changes=new w;static \u0275fac=function(o){return new(o||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ft(e){return e||new k}var Nt={provide:k,deps:[[new P,new R,k]],useFactory:Ft},Tt=(()=>{class e{_intl=p(k);_sort=p(b,{optional:!0});_columnDef=p("MAT_SORT_HEADER_COLUMN_DEF",{optional:!0});_changeDetectorRef=p(it);_focusMonitor=p(dt);_elementRef=p(j);_ariaDescriber=p(lt,{optional:!0});_renderChanges;_animationModule=p(V,{optional:!0});_recentlyCleared=$(null);_sortButton;id;arrowPosition="after";start;disabled=!1;get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(t){this._updateSortActionDescription(t)}_sortActionDescription="Sort";disableClear;constructor(){p(st).load(mt);let t=p(Bt,{optional:!0});this._sort,t?.arrowPosition&&(this.arrowPosition=t?.arrowPosition)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._sort.register(this),this._renderChanges=I(this._sort._stateChanges,this._sort.sortChange).subscribe(()=>this._changeDetectorRef.markForCheck()),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(()=>this._recentlyCleared.set(null))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._renderChanges?.unsubscribe(),this._sortButton&&this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription)}_toggleOnInteraction(){if(!this._isDisabled()){let t=this._isSorted(),o=this._sort.direction;this._sort.sort(this),this._recentlyCleared.set(t&&!this._isSorted()?o:null)}}_handleKeydown(t){(t.keyCode===32||t.keyCode===13)&&(t.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&(this._sort.direction==="asc"||this._sort.direction==="desc")}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?this._sort.direction=="asc"?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(t){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,t)),this._sortActionDescription=t}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=v({type:e,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(o,a){o&1&&C("click",function(){return a._toggleOnInteraction()})("keydown",function(Ot){return a._handleKeydown(Ot)})("mouseleave",function(){return a._recentlyCleared.set(null)}),o&2&&(x("aria-sort",a._getAriaSortAttribute()),E("mat-sort-header-disabled",a._isDisabled()))},inputs:{id:[0,"mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",disabled:[2,"disabled","disabled",y],sortActionDescription:"sortActionDescription",disableClear:[2,"disableClear","disableClear",y]},exportAs:["matSortHeader"],attrs:Pt,ngContentSelectors:Rt,decls:4,vars:17,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],[1,"mat-sort-header-arrow"],["viewBox","0 -960 960 960","focusable","false","aria-hidden","true"],["d","M440-240v-368L296-464l-56-56 240-240 240 240-56 56-144-144v368h-80Z"]],template:function(o,a){o&1&&(W(),r(0,"div",0)(1,"div",1),Z(2),n(),d(3,Ut,3,0,"div",2),n()),o&2&&(E("mat-sort-header-sorted",a._isSorted())("mat-sort-header-position-before",a.arrowPosition==="before")("mat-sort-header-descending",a._sort.direction==="desc")("mat-sort-header-ascending",a._sort.direction==="asc")("mat-sort-header-recently-cleared-ascending",a._recentlyCleared()==="asc")("mat-sort-header-recently-cleared-descending",a._recentlyCleared()==="desc")("mat-sort-header-animations-disabled",a._animationModule==="NoopAnimations"),x("tabindex",a._isDisabled()?null:0)("role",a._isDisabled()?null:"button"),l(3),q(a._renderArrow()?3:-1))},styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-container::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-sort-header-content{display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}@keyframes _mat-sort-header-recently-cleared-ascending{from{transform:translateY(0);opacity:1}to{transform:translateY(-25%);opacity:0}}@keyframes _mat-sort-header-recently-cleared-descending{from{transform:translateY(0) rotate(180deg);opacity:1}to{transform:translateY(25%) rotate(180deg);opacity:0}}.mat-sort-header-arrow{height:12px;width:12px;position:relative;transition:transform 225ms cubic-bezier(0.4, 0, 0.2, 1),opacity 225ms cubic-bezier(0.4, 0, 0.2, 1);opacity:0;overflow:visible;color:var(--mat-sort-arrow-color, var(--mat-sys-on-surface))}.mat-sort-header.cdk-keyboard-focused .mat-sort-header-arrow,.mat-sort-header.cdk-program-focused .mat-sort-header-arrow,.mat-sort-header:hover .mat-sort-header-arrow{opacity:.54}.mat-sort-header .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1}.mat-sort-header-descending .mat-sort-header-arrow{transform:rotate(180deg)}.mat-sort-header-recently-cleared-ascending .mat-sort-header-arrow{transform:translateY(-25%)}.mat-sort-header-recently-cleared-ascending .mat-sort-header-arrow{transition:none;animation:_mat-sort-header-recently-cleared-ascending 225ms cubic-bezier(0.4, 0, 0.2, 1) forwards}.mat-sort-header-recently-cleared-descending .mat-sort-header-arrow{transition:none;animation:_mat-sort-header-recently-cleared-descending 225ms cubic-bezier(0.4, 0, 0.2, 1) forwards}.mat-sort-header-animations-disabled .mat-sort-header-arrow{transition-duration:0ms;animation-duration:0ms}.mat-sort-header-arrow svg{width:24px;height:24px;fill:currentColor;position:absolute;top:50%;left:50%;margin:-12px 0 0 -12px;transform:translateZ(0)}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}"],encapsulation:2,changeDetection:0})}return e})(),It=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=L({type:e});static \u0275inj=O({providers:[Nt],imports:[ct]})}return e})();function jt(e,i){e&1&&(r(0,"th",20),s(1,"Foglal\xF3 "),n())}function $t(e,i){if(e&1&&(r(0,"td",21),s(1),n()),e&2){let t=i.$implicit;l(),f(t.userEmail)}}function Vt(e,i){e&1&&(r(0,"th",20),s(1,"Modell"),n())}function Lt(e,i){if(e&1&&(r(0,"td",21),s(1),n()),e&2){let t=i.$implicit;l(),f(t.carModel)}}function Qt(e,i){e&1&&(r(0,"th",20),s(1,"M\xE1rka"),n())}function qt(e,i){if(e&1&&(r(0,"td",21),s(1),n()),e&2){let t=i.$implicit;l(),f(t.carBrand)}}function Kt(e,i){e&1&&(r(0,"th",20),s(1,"K\xE9rt Extr\xE1k"),n())}function Wt(e,i){if(e&1&&(r(0,"td",21),s(1),n()),e&2){let t=i.$implicit;l(),f(t.extras)}}function Zt(e,i){e&1&&(r(0,"th",20),s(1,"Foglal\xE1s d\xE1tuma"),n())}function Gt(e,i){if(e&1&&(r(0,"td",21),s(1),S(2,"date"),n()),e&2){let t=i.$implicit;l(),f(D(2,1,t.bookingDate,"short"))}}function Jt(e,i){e&1&&(r(0,"th",20),s(1,"Foglal\xE1s kezdete"),n())}function Xt(e,i){if(e&1&&(r(0,"td",21),s(1),S(2,"date"),n()),e&2){let t=i.$implicit;l(),f(D(2,1,t.startDate,"yyyy.MM.dd"))}}function te(e,i){e&1&&(r(0,"th",20),s(1,"Foglal\xE1s v\xE9ge"),n())}function ee(e,i){if(e&1&&(r(0,"td",21),s(1),S(2,"date"),n()),e&2){let t=i.$implicit;l(),f(D(2,1,t.endDate,"yyyy.MM.dd"))}}function ie(e,i){e&1&&(r(0,"th",20),s(1,"\xC1r"),n())}function ne(e,i){if(e&1&&(r(0,"td",21),s(1),n()),e&2){let t=i.$implicit;l(),tt("",t.total," Ft")}}function oe(e,i){e&1&&(r(0,"th",22),s(1,"Foglal\xE1s st\xE1tusza"),n())}function ae(e,i){if(e&1&&(r(0,"td",21),s(1),n()),e&2){let t=i.$implicit;l(),f(t.status)}}function re(e,i){e&1&&(r(0,"th",22),s(1,"M\u0171veletek"),n())}function se(e,i){if(e&1){let t=K();r(0,"td",21)(1,"button",23),C("click",function(){let a=z(t).$implicit,u=M(2);return F(u.bookingCancellation(a))}),s(2," Lemond\xE1s "),n()()}if(e&2){let t=i.$implicit,o=M(2);l(),_("disabled",o.disabledButton(t))}}function le(e,i){e&1&&h(0,"tr",24)}function de(e,i){e&1&&h(0,"tr",25)}function ce(e,i){e&1&&(r(0,"p"),s(1,"Nincs foglal\xE1s jelenleg."),n())}function me(e,i){if(e&1&&(r(0,"div",2)(1,"div",3)(2,"h2"),s(3,"Foglal\xE1sok kezel\xE9se"),n()(),c(4),r(5,"table",4),c(6,5),d(7,jt,2,0,"th",6)(8,$t,2,1,"td",7),m(),c(9,8),d(10,Vt,2,0,"th",6)(11,Lt,2,1,"td",7),m(),c(12,9),d(13,Qt,2,0,"th",6)(14,qt,2,1,"td",7),m(),c(15,10),d(16,Kt,2,0,"th",6)(17,Wt,2,1,"td",7),m(),c(18,11),d(19,Zt,2,0,"th",6)(20,Gt,3,4,"td",7),m(),c(21,12),d(22,Jt,2,0,"th",6)(23,Xt,3,4,"td",7),m(),c(24,13),d(25,te,2,0,"th",6)(26,ee,3,4,"td",7),m(),c(27,14),d(28,ie,2,0,"th",6)(29,ne,2,1,"td",7),m(),c(30,15),d(31,oe,2,0,"th",16)(32,ae,2,1,"td",7),m(),c(33,17),d(34,re,2,0,"th",16)(35,se,3,1,"td",7),m(),d(36,le,1,0,"tr",18)(37,de,1,0,"tr",19),n(),m(),d(38,ce,2,0,"ng-template",null,0,et),n()),e&2){let t=M();l(5),_("dataSource",t.datasource),l(31),_("matHeaderRowDef",t.displayedColumns),l(),_("matRowDefColumns",t.displayedColumns)}}var At=class e{constructor(i,t){this.bookingservice=i;this.snackBar=t}displayedColumns=["email","brand","model","extra","bookingDate","startDate","endDate","price","bookingState","actions"];datasource=new B([]);sort;ngAfterViewInit(){this.datasource.sort=this.sort}disabledButton(i){if(i.status=="completed"||i.status=="canceled")return!0;let t=new Date(i.startDate),o=new Date,a=new Date(o);return a.setDate(o.getDate()+1),t.setHours(0,0,0,0),o.setHours(0,0,0,0),t<a}ngOnInit(){this.loadBookings()}loadBookings(){this.bookingservice.getMyBookings().subscribe({next:i=>{let t=i;this.datasource=new B(t),this.ngAfterViewInit()},error:i=>{console.log(i)}})}bookingCancellation(i){i._id&&this.bookingservice.usercancelBooking(i._id).subscribe({next:t=>{this.loadBookings(),this.snackBar.open(t.message,"Bez\xE1r",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["snackbar-success"]})},error:t=>{console.error("Lemond\xE1s sikertelen:",t),this.snackBar.open(t.error.message||"Hiba t\xF6rt\xE9nt","Bez\xE1r",{duration:3e3,panelClass:["snackbar-error"]})}})}static \u0275fac=function(t){return new(t||e)(g(Et),g(ut))};static \u0275cmp=v({type:e,selectors:[["app-booking-user-management"]],viewQuery:function(t,o){if(t&1&&G(b,5),t&2){let a;J(a=X())&&(o.sort=a.first)}},decls:1,vars:1,consts:[["noUsersTemplate",""],["class","table-container",4,"ngIf"],[1,"table-container"],[1,"table-header"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","email"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","model"],["matColumnDef","brand"],["matColumnDef","extra"],["matColumnDef","bookingDate"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","price"],["matColumnDef","bookingState"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-raised-button","","color","warn",3,"click","disabled"],["mat-header-row",""],["mat-row",""]],template:function(t,o){t&1&&d(0,me,40,3,"div",1),t&2&&_("ngIf",o.datasource)},dependencies:[at,nt,ot,xt,ht,bt,St,vt,yt,Dt,Ct,Mt,kt,wt,gt,ft,pt,rt,It,b,Tt,_t],styles:[".table-container[_ngcontent-%COMP%]{max-width:1300px;margin:20px auto;overflow-x:auto;align-self:top}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%]{background:#f5f5f5;font-weight:700;text-align:left}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #ddd}button[_ngcontent-%COMP%]{font-weight:700}.snackbar-success[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.snackbar-error[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}"]})};export{At as BookingUserManagementComponent};
