import{a as ge,b as _e}from"./chunk-H7GM5ZLO.js";import{a as N}from"./chunk-GS6W7T7Z.js";import{c as z}from"./chunk-KLQPCONT.js";import{a as ae,b as oe,c as re,d as le,e as me,f as se,g as v}from"./chunk-D6VNJF2Z.js";import{a as de,e as ce,f as pe,g as ue,h as fe}from"./chunk-D6VN6RPM.js";import"./chunk-YQIIGZSV.js";import{a as J,b as K,c as Q,d as X,e as Y,f as Z,g as $,h as ee,i as te,j as ne,k as ie}from"./chunk-GIISCLF3.js";import{a as G,b as q}from"./chunk-XVS2ME6S.js";import{a as L,b as V,c as x}from"./chunk-BRJT4V7N.js";import"./chunk-DXXU7KGT.js";import{b as W,g as H,l as j,s as B}from"./chunk-GUNOTPQD.js";import{$ as _,Bb as r,Cb as A,Db as p,Fb as M,Ga as m,Gb as b,Hb as E,Ka as S,Ob as F,Ra as U,V as T,Wa as d,_ as I,bb as C,ga as D,ha as y,ib as n,jb as a,kb as c,lb as u,mb as f,ob as R,oc as P,qb as g,rb as k,sc as O}from"./chunk-UYNK6D4K.js";var h=class t{constructor(e){this.http=e}getAll(){return this.http.get("http://localhost:5000/app/getAllUsers",{withCredentials:!0})}deleteuser(e){return this.http.delete("http://localhost:5000/app/delete_user/"+e._id,{withCredentials:!0})}updateUser(e){let i={_id:e._id,email:e.email,name:e.name,address:e.address,nickname:e.nickname,role:e.role};return this.http.post("http://localhost:5000/app/update_user",i,{withCredentials:!0})}static \u0275fac=function(i){return new(i||t)(I(O))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})};var w=class t{title="";selectedFile=null;userservice=_(h);check=!1;user=_(oe)??{name:"",email:"",nickname:"",address:"",role:""};toggleAdmin(e){e?this.user.role="Admin":this.user.role="User"}ngOnInit(){this.user.name==""?this.title="\xDAj felhaszn\xE1l\xF3 hozz\xE1ad\xE1sa":this.title="Felhaszn\xE1l\xF3 szerkeszt\xE9se"}dialogRef=_(ae);onSave(){this.userservice.updateUser(this.user).subscribe({next:()=>this.dialogRef.close("referesh"),error:e=>console.error("Hiba ment\xE9s k\xF6zben:",e)})}onCancel(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=U({type:t,selectors:[["edit-user-dialog"]],decls:31,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","",3,"ngModelChange","ngModel"],[3,"change","checked"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,o){i&1&&(n(0,"h2",0),r(1),a(),n(2,"div",1),c(3,"br"),n(4,"mat-form-field")(5,"mat-label"),r(6,"N\xE9v"),a(),n(7,"input",2),E("ngModelChange",function(l){return b(o.user.name,l)||(o.user.name=l),l}),a()(),c(8,"br"),n(9,"mat-form-field")(10,"mat-label"),r(11,"Email"),a(),n(12,"input",2),E("ngModelChange",function(l){return b(o.user.email,l)||(o.user.email=l),l}),a()(),c(13,"br"),n(14,"mat-form-field")(15,"mat-label"),r(16,"Lakc\xEDm"),a(),n(17,"input",2),E("ngModelChange",function(l){return b(o.user.address,l)||(o.user.address=l),l}),a()(),c(18,"br"),n(19,"mat-form-field")(20,"mat-label"),r(21,"Felhaszn\xE1l\xF3 n\xE9v"),a(),n(22,"input",2),E("ngModelChange",function(l){return b(o.user.nickname,l)||(o.user.nickname=l),l}),a()(),c(23,"br"),n(24,"mat-checkbox",3),g("change",function(l){return o.toggleAdmin(l.checked)}),r(25),a()(),n(26,"div",4)(27,"button",5),g("click",function(){return o.onCancel()}),r(28,"M\xE9gse"),a(),n(29,"button",6),g("click",function(){return o.onSave()}),r(30,"Ment\xE9s"),a()()),i&2&&(m(),A(o.title),m(6),M("ngModel",o.user.name),m(5),M("ngModel",o.user.email),m(5),M("ngModel",o.user.address),m(5),M("ngModel",o.user.nickname),m(2),C("checked",o.user.role==="Admin"),m(),p(" ",o.user.role," "))},dependencies:[pe,ce,de,fe,ue,B,W,H,j,x,L,v,le,se,me,_e,ge],encapsulation:2})};function Se(t,e){t&1&&(n(0,"th",13),r(1," Email c\xEDm "),a())}function Ue(t,e){if(t&1&&(n(0,"td",14),r(1),a()),t&2){let i=e.$implicit;m(),p(" ",i.email," ")}}function xe(t,e){t&1&&(n(0,"th",13),r(1," N\xE9v "),a())}function ve(t,e){if(t&1&&(n(0,"td",14),r(1),a()),t&2){let i=e.$implicit;m(),p(" ",i.name," ")}}function we(t,e){t&1&&(n(0,"th",13),r(1," Lakc\xEDm "),a())}function De(t,e){if(t&1&&(n(0,"td",14),r(1),a()),t&2){let i=e.$implicit;m(),p(" ",i.address," ")}}function ye(t,e){t&1&&(n(0,"th",13),r(1," Felhaszn\xE1l\xF3 n\xE9v"),a())}function ke(t,e){if(t&1&&(n(0,"td",14),r(1),a()),t&2){let i=e.$implicit;m(),p(" ",i.nickname," ")}}function Te(t,e){t&1&&(n(0,"th",13),r(1," Szerep "),a())}function Ie(t,e){if(t&1&&(n(0,"td",14),r(1),a()),t&2){let i=e.$implicit;m(),p(" ",i.role," ")}}function Re(t,e){t&1&&(n(0,"th",13),r(1," M\u0171veletek "),a())}function Ae(t,e){if(t&1){let i=R();n(0,"td",14)(1,"button",15),g("click",function(){let s=D(i).$implicit,l=k();return y(l.editUser(s))}),n(2,"mat-icon"),r(3,"edit"),a()(),n(4,"button",16),g("click",function(){let s=D(i).$implicit,l=k();return y(l.deleteUser(s))}),n(5,"mat-icon"),r(6,"delete"),a()()()}}function Fe(t,e){t&1&&c(0,"tr",17)}function Pe(t,e){t&1&&c(0,"tr",18)}function Oe(t,e){t&1&&(n(0,"p"),r(1,"No users available."),a())}var he=class t{constructor(e,i,o){this.userService=e;this.authService=i;this.router=o}users=[];dialog=_(re);displayedColumns=["email","name","address","nickname","role","actions"];ngOnInit(){this.loadData()}deleteUser(e){this.userService.deleteuser(e).subscribe(i=>{this.loadData()})}editUser(e){this.dialog.open(w,{data:e,height:"600px",width:"1000px"}).afterClosed().subscribe(o=>{o!==void 0&&this.loadData()})}loadData(){this.userService.getAll().subscribe({next:e=>{this.users=e},error:e=>{console.log(e)}})}static \u0275fac=function(i){return new(i||t)(S(h),S(N),S(z))};static \u0275cmp=U({type:t,selectors:[["app-user-management"]],decls:24,vars:3,consts:[["noUsersTemplate",""],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","email"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","address"],["matColumnDef","nickname"],["matColumnDef","role"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,o){i&1&&(n(0,"div",1)(1,"table",2),u(2,3),d(3,Se,2,0,"th",4)(4,Ue,2,1,"td",5),f(),u(5,6),d(6,xe,2,0,"th",4)(7,ve,2,1,"td",5),f(),u(8,7),d(9,we,2,0,"th",4)(10,De,2,1,"td",5),f(),u(11,8),d(12,ye,2,0,"th",4)(13,ke,2,1,"td",5),f(),u(14,9),d(15,Te,2,0,"th",4)(16,Ie,2,1,"td",5),f(),u(17,10),d(18,Re,2,0,"th",4)(19,Ae,7,0,"td",5),f(),d(20,Fe,1,0,"tr",11)(21,Pe,1,0,"tr",12),a()(),d(22,Oe,2,0,"ng-template",null,0,F)),i&2&&(m(),C("dataSource",o.users),m(19),C("matHeaderRowDef",o.displayedColumns),m(),C("matRowDefColumns",o.displayedColumns))},dependencies:[P,ie,J,Q,$,X,K,ee,Y,Z,te,ne,q,G,x,V,v],styles:[".table-container[_ngcontent-%COMP%]{max-width:900px;margin:20px auto;overflow-x:auto}.table-header[_ngcontent-%COMP%]{display:flex;margin-top:10%;justify-content:space-between;align-items:center;margin-bottom:15px}h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700}table[_ngcontent-%COMP%]{width:100%;margin-top:10%;border-collapse:collapse}th[_ngcontent-%COMP%]{background:#f5f5f5;font-weight:700;text-align:left}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #ddd}button[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px}"]})};export{he as UserManagementComponent};
